# Образовательная система (Education System)

Полноценная ролевая система управления обучением:

- **Бэкенд:** Django 5 + Django REST Framework (DRF)
- **Фронтенд:** Angular 19 (Standalone-компоненты + Bootstrap 5)
- **Аутентификация:** JWT (access + refresh токены)
- **Роли:** Администратор, Преподаватель, Студент

---

## Роли

| Роль        | Возможности                                                                                         |
| ----------- | --------------------------------------------------------------------------------------------------- |
| **Admin**   | Полный доступ ко всем данным (пользователи, студенты, преподаватели, группы, предметы, расписание). |
| **Teacher** | Доступ к своему профилю, группам, предметам, ученикам и расписанию.                                 |
| **Student** | Доступ к профилю, своим предметам, преподавателям, группе и расписанию.                             |

---

## Основные функции

- Вход и обновление токена (JWT)
- Навбар с ролевыми пунктами меню
- Защищённые маршруты Angular
- REST API для управления:
  - Пользователями
  - Студентами и преподавателями
  - Группами и предметами
  - Расписанием

---

# Аутентификация (JWT)

**URL-ы:**

| Метод | Endpoint              | Назначение                       |
| ----- | --------------------- | -------------------------------- |
| POST  | `/api/token/`         | Получить access + refresh токены |
| POST  | `/api/token/refresh/` | Обновить access токен            |

**Пример запроса:**

```json
{
  "username": "имя_пользователя",
  "password": "пароль"
}
```

---

# API (Backend)

## Пользователи

| Метод | Endpoint | Назначение              |
| ----- | -------- | ----------------------- |
| GET   | `/user/` | Получить текущего юзера |

## Студенты

Базовый путь: `/api/students/`

### Группы

| Метод  | Endpoint        | Описание        |
| ------ | --------------- | --------------- |
| GET    | `/groups/`      | Список групп    |
| POST   | `/groups/`      | Создание группы |
| GET    | `/groups/<id>/` | Детали группы   |
| PUT    | `/groups/<id>/` | Обновление      |
| DELETE | `/groups/<id>/` | Удаление        |

### Студенты

| Метод  | Endpoint          | Описание         |
| ------ | ----------------- | ---------------- |
| GET    | `/students/`      | Список студентов |
| POST   | `/students/`      | Добавить         |
| GET    | `/students/<id>/` | Просмотр         |
| PUT    | `/students/<id>/` | Обновление       |
| DELETE | `/students/<id>/` | Удаление         |

## Преподаватели

Базовый путь: `/api/teachers/`

| Метод  | Endpoint          | Описание   |
| ------ | ----------------- | ---------- |
| GET    | `/teachers/`      | Список     |
| POST   | `/teachers/`      | Добавление |
| GET    | `/teachers/<id>/` | Просмотр   |
| PUT    | `/teachers/<id>/` | Обновление |
| DELETE | `/teachers/<id>/` | Удаление   |

## Предметы

Базовый путь: `/api/subjects/`

| Метод  | Endpoint          | Описание         |
| ------ | ----------------- | ---------------- |
| GET    | `/subjects/`      | Список предметов |
| POST   | `/subjects/`      | Добавление       |
| GET    | `/subjects/<id>/` | Просмотр         |
| PUT    | `/subjects/<id>/` | Обновление       |
| DELETE | `/subjects/<id>/` | Удаление         |

## Расписание

Базовый путь: `/api/schedules/`

| Метод  | Endpoint           | Описание       |
| ------ | ------------------ | -------------- |
| GET    | `/schedules/`      | Список записей |
| POST   | `/schedules/`      | Создание       |
| GET    | `/schedules/<id>/` | Просмотр       |
| PUT    | `/schedules/<id>/` | Обновление     |
| DELETE | `/schedules/<id>/` | Удаление       |

---

# Фронтенд (Angular 19)

## Аутентификация

| Роут      | Описание                |
| --------- | ----------------------- |
| `/login`  | Вход                    |
| `/logout` | Очистка токенов и выход |

- `localStorage`: `access_token`, `refresh_token`, `current_role`
- Перехватчик HTTP добавляет `Authorization` ко всем запросам
- Обновление токена при 401, автологаут если refresh недействителен

## Общие компоненты

| Компонент       | Назначение                       |
| --------------- | -------------------------------- |
| NavbarComponent | Навбар с ролевыми ссылками       |
| FooterComponent | Футер                            |
| AuthService     | Логика входа, выхода, токенов    |
| authInterceptor | Добавляет токены, автообновление |

## Роуты и компоненты

### Пользователь

- `/user` — `UserDetailComponent`

### Группы

- `/groups` — список
- `/groups/create` — создание
- `/groups/:id` — просмотр
- `/groups/:id/edit` — редактирование

### Студенты

- `/students` — список
- `/students/create` — создать
- `/students/:id` — просмотр
- `/students/:id/edit` — редактирование

### Преподаватели

- `/teachers` — список
- `/teachers/create` — добавить
- `/teachers/:id` — просмотр
- `/teachers/:id/edit` — редактирование

### Предметы

- `/subjects` — список
- `/subjects/create` — создание
- `/subjects/:id` — просмотр
- `/subjects/:id/edit` — редактирование

### Расписание

- `/schedules` — список
- `/schedules/create` — создание
- `/schedules/:id` — просмотр
- `/schedules/:id/edit` — редактирование

---

## Валидация и формы

- Формы шаблонные (`[(ngModel)]`)
- Валидация Angular + Bootstrap (`is-invalid`, `.invalid-feedback`)
- Валидация расписания: `start_time < end_time`, нет конфликтов по преподавателю

---

## Хранилище

| Ключ            | Описание                                          |
| --------------- | ------------------------------------------------- |
| `access_token`  | JWT access-токен                                  |
| `refresh_token` | JWT refresh-токен                                 |
| `current_role`  | Роль пользователя (`admin`, `teacher`, `student`) |

---

## Структура проекта (Angular)

```
src/app/
  auth/
    login/
    auth.service.ts
    auth.interceptor.ts
  shared/
    navbar/
    footer/
  users/
  groups/
  students/
  teachers/
  subjects/
  schedules/
  app.routes.ts
```

---

## Прочее

- Все компоненты — standalone (без NgModules)
- Используется только Bootstrap 5
- Планируется клиентская фильтрация по ролям (пока глобальные запросы)
